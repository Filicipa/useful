global:
  resolve_timeout: 5m

route:
  receiver: discord
  group_by: ["alertname", "instance", "service"]
  #  group_wait: 3s
  #  group_interval: 10s
  repeat_interval: 4h

receivers:
  - name: "discord"
    discord_configs:
      #      - webhook_url: https://discord.com/api/webhooks/1302595057060413520/8
      - webhook_url: https://discord.com/api/webhooks/1276546850291454036/n
        send_resolved: true
        username: "Prometheus Bot"
        title: "{{ .CommonLabels.alertname }}"
        message: "Prometheus Alert"
        content: |
          {{- if eq .Status "firing" -}}
          ðŸš¨ *ALERT*: {{ .CommonLabels.alertname }}
          ðŸ’¥ Severity: {{ .CommonLabels.severity }}
          ðŸ›  Service(s):
          {{- range .Alerts }}
          â€¢ {{ .Labels.service }} on {{ .Labels.instance }}
          {{- end }}
          ðŸ“‹ Description:
          {{- range .Alerts }}
          â€¢ {{ .Annotations.description }}
          {{- end }}
          {{- else -}}
          âœ… *RESOLVED*: {{ .CommonLabels.alertname }}
          ðŸŸ¢ All affected services are back to normal:
          {{- range .Alerts }}
          â€¢ {{ .Labels.service }} on {{ .Labels.instance }}
          {{- end }}
          {{- end }}
          @everyone
